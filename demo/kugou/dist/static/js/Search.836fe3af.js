(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[1],{"7kCV":function(t,e,s){},LZAx:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",{staticClass:"search"},[s("PubModuleTitle",{staticClass:"search__title",attrs:{title:t.title}}),s("div",{ref:"searchCont",staticClass:"search__cont"},[s("form",{staticClass:"search__form",on:{submit:function(t){t.preventDefault()}}},[s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.keyword,expression:"keyword",modifiers:{trim:!0}}],staticClass:"search__input",attrs:{type:"text",placeholder:t.placeholder},domProps:{value:t.keyword},on:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.getSearchRes(e):null},input:function(e){e.target.composing||(t.keyword=e.target.value.trim())},blur:function(e){t.$forceUpdate()}}}),s("button",{class:t.isSearchResShow?"search__btn search__btn--active":"search__btn",attrs:{type:"button"},on:{click:t.getSearchRes}},[t._v(t._s(t.title))])]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.isSearchRecShow,expression:"isSearchRecShow"}],staticClass:"search__rec"},[s("h6",{staticClass:"search__type"},[t._v(t._s(t.searchType))]),s("ul",{staticClass:"search__list"},t._l(t.searchRecArr,function(e,a){return s("li",{key:a,staticClass:"search__item main_border_bottom",on:{click:function(s){t.keyword=e.keyword,t.getSearchRes()}}},[t._v(t._s(e.keyword))])}))]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.isSearchResShow,expression:"isSearchResShow"}],staticClass:"search__res"},[s("div",{staticClass:"search__count"},[t._v("共有"+t._s(t.searchRes.info.length)+"条结果")]),s("AppMusicList",{staticClass:"search__res-list",attrs:{"music-list":t.searchRes.info}})],1)])],1)},i=[],r=(s("pIFo"),s("OG14"),s("yT7P")),c=s("uo/n"),o=s("PxLW"),n=s("zr5I"),h=s.n(n),u=s("pHQ6"),l=s("nc4g"),d=s("eToF"),p=s("WIBD"),f={name:"Search",mixins:[d["a"]],components:{PubModuleTitle:c["a"],AppMusicList:o["a"]},data:function(){return{title:"搜索",searchType:"最近热门",placeholder:"歌手/歌名/拼音"}},computed:Object(r["a"])({},Object(p["mapState"])("search",["searchRecArr","searchRes","isSearchRecShow","isSearchResShow"]),{keyword:{get:function(){return this.$store.state.search.keyword},set:function(t){this.replaceProperty({paths:"search.keyword",data:t})}},isSearchRecShow:{get:function(){return this.$store.state.search.isSearchRecShow},set:function(t){this.replaceProperty({paths:"search.isSearchRecShow",data:t})}},isSearchResShow:{get:function(){return this.$store.state.search.isSearchResShow},set:function(t){this.replaceProperty({paths:"search.isSearchResShow",data:t})}}}),created:function(){this.init()},mounted:function(){l["a"].$on("searchBtnClicked",this.scrollTopSearchCont),this.initQqBugDetect()},destroyed:function(){l["a"].$off("searchBtnClicked",this.scrollTopSearchCont)},methods:Object(r["a"])({},Object(p["mapMutations"])(["replaceProperty"]),{init:function(){var t=this.$route.query.keyword,e="string"===typeof this.keyword&&""!==this.keyword,s="string"===typeof t&&""!==t;s&&t!==this.keyword?(this.keyword=t,this.getSearchRes()):e?(this.isSearchRecShow=!1,this.isSearchResShow=!0):this.getSearchRec()},getSearchRec:function(){var t=this;if(0!==this.searchRecArr.length)return this.isSearchResShow=!1,void(this.isSearchRecShow=!0);this.setLoadingExcludeSearchForm(),this.startLoading(),h.a.get(u["a"].hotSearch).then(function(e){var s=e.data;t.replaceProperty({paths:"search.searchRecArr",data:s.data.info}),t.stopLoading(),t.isSearchResShow=!1,t.isSearchRecShow=!0}).catch(function(t){alert(t)})},getSearchRes:function(){var t=this;if(""!==this.keyword){this.$router.replace({query:{keyword:this.keyword}});var e=u["a"].searchResult+encodeURIComponent(this.keyword);this.setLoadingExcludeSearchForm(),this.startLoading(),h.a.get(e).then(function(e){var s=e.data.data;t.replaceProperty({paths:"search.searchRes",data:s}),t.isSearchRecShow=!1,t.isSearchResShow=!0,t.stopLoading()}).catch(function(t){return alert(t)})}},initQqBugDetect:function(){var t=document.getElementsByClassName("search__cont")[0];window.search__cont=t;//! bug with qq browser
var e=function(){t.scrollTop};window.addEventListener("touchstart",e),window.addEventListener("touchmove",e)},scrollTopSearchCont:function(){this.$refs.searchCont&&(this.$refs.searchCont.scrollTop=0)}})},_=f,m=(s("T7BO"),s("KHd+")),w=Object(m["a"])(_,a,i,!1,null,"10316733",null);e["default"]=w.exports},OG14:function(t,e,s){s("IU+Z")("search",1,function(t,e,s){return[function(s){"use strict";var a=t(this),i=void 0==s?void 0:s[e];return void 0!==i?i.call(s,a):new RegExp(s)[e](String(a))},s]})},PxLW:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ul",{staticClass:"music_list"},t._l(t.musicList,function(e,a){return s("li",{key:a,staticClass:"music_list__item main_border_bottom"},[s("div",{staticClass:"music_list__info",on:{click:function(s){t.wantPlay(e)}}},[t._t("index",null,{data:a}),s("div",{staticClass:"music_list__name"},[t._v(t._s(e.filename))])],2),s("button",{staticClass:"music_list__download"},[s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icon-download"}})])])])}))},i=[],r={name:"AppMusicList",props:{musicList:{type:Array,default:function(){return[]}}},methods:{wantPlay:function(t){this.$store.commit("player/wantPlay",{music:t,musicList:this.$props.musicList})}}},c=r,o=(s("VvY7"),s("KHd+")),n=Object(o["a"])(c,a,i,!1,null,"39bf58b4",null);e["a"]=n.exports},T7BO:function(t,e,s){"use strict";var a=s("7kCV"),i=s.n(a);i.a},VvY7:function(t,e,s){"use strict";var a=s("vVRU"),i=s.n(a);i.a},eToF:function(t,e,s){"use strict";var a=s("yT7P"),i=s("WIBD");e["a"]={updated:function(){this.stopLoading()},methods:Object(a["a"])({},Object(i["mapMutations"])(["replaceProperty"]),{startLoading:function(){this.replaceProperty({paths:"loading.isShow",data:!0})},stopLoading:function(){this.replaceProperty({paths:"loading.isShow",data:!1})},setLoadingExcludeHeader:function(){this.replaceProperty({paths:"loading.sizeClassName",data:"loading--exclude_header"})},setLoadingExcludeNav:function(){this.replaceProperty({paths:"loading.sizeClassName",data:"loading--exclude_nav"})},setLoadingExcludeModuleTitle:function(){this.replaceProperty({paths:"loading.sizeClassName",data:"loading--exclude_module_title"})},setLoadingExcludeSearchForm:function(){this.replaceProperty({paths:"loading.sizeClassName",data:"loading--exclude_search_form"})}})}},u5pF:function(t,e,s){},"uo/n":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("h4",{staticClass:"module_title main_box_shadow",on:{click:function(e){t.$emit("click",arguments[0])}}},[t._v(t._s(t.title))])},i=[],r={name:"PubModuleTitle",props:{title:{type:String,default:function(){return""}}}},c=r,o=(s("yuGp"),s("KHd+")),n=Object(o["a"])(c,a,i,!1,null,"95e615fa",null);e["a"]=n.exports},vVRU:function(t,e,s){},yuGp:function(t,e,s){"use strict";var a=s("u5pF"),i=s.n(a);i.a}}]);
//# sourceMappingURL=Search.836fe3af.js.map